{% extends 'base.html' %}

{% block content %}
<h1>Add New Report</h1>
<form method="POST">
    <div class="mb-3">
        <label for="date_time" class="form-label">Date/Time</label>
        <input type="datetime-local" class="form-control" id="date_time" name="date_time" required>
    </div>
    <div class="mb-3">
        <label for="reporter" class="form-label">Reporter</label>
        <input type="text" class="form-control" id="reporter" name="reporter" required>
    </div>
    <div class="mb-3">
        <label for="reportee" class="form-label">Reportee</label>
        <input type="text" class="form-control" id="reportee" name="reportee" required>
    </div>
    <div class="mb-3">
        <label for="report_reason" class="form-label">Report Reason</label>
        <select class="form-select" id="report_reason" name="report_reason" required onchange="toggleOtherField()">
            <option value="" disabled selected>Select a reason</option>
            <option value="RDM">RDM</option>
            <option value="MassRDM">MassRDM</option>
            <option value="Propblock">Propblock</option>
            <option value="PB Spawn">PB Spawn</option>
            <option value="Racism">Racism</option>
            <option value="NLR">NLR</option>
            <option value="FailRP">FailRP</option>
            <option value="FailBase">FailBase</option>
            <option value="Other">Other</option>
        </select>
        <input type="text" class="form-control mt-2 d-none" id="other_reason" name="other_reason" placeholder="Please specify" />
    </div>
    <div class="mb-3">
        <label for="evidence" class="form-label">Evidence (Comma-separated file paths)</label>
        <textarea class="form-control" id="evidence" name="evidence" rows="3" required></textarea>
    </div>
    <div class="mb-3">
        <label for="punishment" class="form-label">Punishment</label>
        <input type="text" class="form-control" id="punishment" name="punishment" required>
    </div>
    <button type="submit" class="btn btn-success">Add Report</button>
</form>

<script>
function toggleOtherField() {
    var select = document.getElementById('report_reason');
    var otherField = document.getElementById('other_reason');
    if (select.value === 'Other') {
        otherField.classList.remove('d-none');
    } else {
        otherField.classList.add('d-none');
    }
}
</script>
{% endblock %}

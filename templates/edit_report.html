{% extends 'base.html' %}

{% block content %}
<h1>{{ 'Edit Report' if report else 'Add New Report' }}</h1>
<form method="POST">
    <div class="mb-3">
        <label for="date_time" class="form-label">Date/Time</label>
        <input type="datetime-local" class="form-control" id="date_time" name="date_time" required value="{{ report.date_time.strftime('%Y-%m-%dT%H:%M') if report else '' }}">
    </div>
    <div class="mb-3">
        <label for="reporter" class="form-label">Reporter</label>
        <input type="text" class="form-control" id="reporter" name="reporter" required value="{{ report.reporter if report else '' }}">
    </div>
    <div class="mb-3">
        <label for="reportee" class="form-label">Reportee</label>
        <input type="text" class="form-control" id="reportee" name="reportee" required value="{{ report.reportee if report else '' }}">
    </div>
    <div class="mb-3">
        <label class="form-label">Report Reason</label>
        {% set reasons = report.report_reason if report else [] %}
        <div class="row">
            <div class="col-md-6">
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="rdm" name="report_reason" value="RDM" {% if 'RDM' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="rdm">RDM</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="massrdm" name="report_reason" value="MassRDM" {% if 'MassRDM' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="massrdm">MassRDM</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="nlr" name="report_reason" value="NLR" {% if 'NLR' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="nlr">NLR</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="massnlr" name="report_reason" value="MassNLR" {% if 'MassNLR' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="massnlr">MassNLR</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="propblock" name="report_reason" value="Propblock" {% if 'Propblock' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="propblock">Propblock</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="pb_spawn" name="report_reason" value="PB Spawn" {% if 'PB Spawn' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="pb_spawn">PB Spawn</label>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="racism" name="report_reason" value="Racism" {% if 'Racism' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="racism">Racism</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="failrp" name="report_reason" value="FailRP" {% if 'FailRP' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="failrp">FailRP</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="failbase" name="report_reason" value="FailBase" {% if 'FailBase' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="failbase">FailBase</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="ltap" name="report_reason" value="LTAP" {% if 'LTAP' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="ltap">LTAP</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="cheating" name="report_reason" value="Cheating" {% if 'Cheating' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="cheating">Cheating</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="other" name="report_reason" value="Other" {% if 'Other' in reasons %}checked{% endif %}>
                    <label class="form-check-label" for="other">Other</label>
                </div>
                {% if report and report.other_reason %}
                <div class="mb-3" id="other_reason_div" style="display: {% if 'Other' in reasons %}block{% else %}none{% endif %};">
                    <label for="other_reason" class="form-label">Specify Other Reason</label>
                    <input type="text" class="form-control" id="other_reason" name="other_reason" value="{{ report.other_reason if report else '' }}">
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="mb-3">
        <label for="evidence" class="form-label">Evidence (Comma-separated file paths and/or links)</label>
        <textarea class="form-control" id="evidence" name="evidence">{{ report.evidence if report else '' }}</textarea>
    </div>
    <div class="mb-3">
        <label for="punishment" class="form-label">Punishment</label>
        <input type="text" class="form-control" id="punishment" name="punishment" value="{{ report.punishment if report else '' }}">
    </div>
    <button type="submit" class="btn btn-primary">{{ 'Save Report' if report else 'Add Report' }}</button>
</form>
{% endblock %}
